{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "logicAppApiVersion": {
            "value": "2016-10-01"
        },
        "workflowName": {
            "value": "logicapp-EmailNotification-Keyvault"
        },
        "workflowLocation": {
            "value": "germanywestcentral"
        },
        "workflowSchema": {
            "value": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#"
        },
        "tags": {
            "value": {}
        },
        "identity": {},
        "definition": {
            "value": "{\"$schema\":\"https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#\",\"actions\":{\"Send_an_email_(V2)\":{\"inputs\":{\"body\":{\"Body\":\"<p>@{triggerBody()?['eventType']}Event Type<br>\\n@{triggerBody()?['id']}Id<br>\\n@{triggerBody()?['subject']}Subject<br>\\nEvent Data:@{triggerBody()?['Data']}&lt;br&gt;</p>\",\"Subject\":\"Secret/Key/Certificate expiry\",\"To\":\"NaraSaikrishna@eurofins.com\"},\"host\":{\"connection\":{\"name\":\"@parameters('$connections')['office365']['connectionId']\"}},\"method\":\"post\",\"path\":\"/v2/Mail\"},\"runAfter\":{},\"type\":\"ApiConnection\"}},\"contentVersion\":\"1.0.0.0\",\"outputs\":{},\"parameters\":{\"$connections\":{\"defaultValue\":{},\"type\":\"Object\"}},\"triggers\":{\"When_a_resource_event_occurs\":{\"inputs\":{\"body\":{\"properties\":{\"destination\":{\"endpointType\":\"webhook\",\"properties\":{\"endpointUrl\":\"@{listCallbackUrl()}\"}},\"filter\":{\"includedEventTypes\":[\"Microsoft.KeyVault.CertificateNearExpiry\",\"Microsoft.KeyVault.SecretNearExpiry\",\"Microsoft.KeyVault.KeyNearExpiry\"]},\"topic\":\"/subscriptions/5766fcc6-fa99-4fcf-9300-8230c2982ec9/resourceGroups/dev-pure/providers/Microsoft.KeyVault/vaults/pure-vault-for-dev\"}},\"host\":{\"connection\":{\"name\":\"@parameters('$connections')['azureeventgrid_1']['connectionId']\"}},\"path\":\"/subscriptions/{topicSubscriptionId}/providers/@{encodeURIComponent('Microsoft.KeyVault.vaults')}/resource/eventSubscriptions\",\"queries\":{\"x-ms-api-version\":\"2017-09-15-preview\"}},\"splitOn\":\"@triggerBody()\",\"type\":\"ApiConnectionWebhook\"}}}"
        },
        "parameters": {
            "value": {
                "$connections": {
                    "value": {
                        "azureeventgrid_1": {
                            "connectionId": "/subscriptions/5766fcc6-fa99-4fcf-9300-8230c2982ec9/resourceGroups/dev-pure/providers/Microsoft.Web/connections/azureeventgrid",
                            "connectionName": "azureeventgrid",
                            "id": "/subscriptions/5766fcc6-fa99-4fcf-9300-8230c2982ec9/providers/Microsoft.Web/locations/germanywestcentral/managedApis/azureeventgrid"
                        },
                        "office365": {
                            "connectionId": "/subscriptions/5766fcc6-fa99-4fcf-9300-8230c2982ec9/resourceGroups/dev-pure/providers/Microsoft.Web/connections/office365",
                            "connectionName": "office365",
                            "id": "/subscriptions/5766fcc6-fa99-4fcf-9300-8230c2982ec9/providers/Microsoft.Web/locations/germanywestcentral/managedApis/office365"
                        }
                    }
                }
            }
        },
        "logicAppState": {
            "value": "Enabled"
        }
    }
}
